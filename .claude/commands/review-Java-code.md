---
description: 审查指定的 Java 代码文件或目录，并根据项目“宪法”给出深度反馈。
argument-hint: [path_to_review]
model: opus
allowed-tools: Read, Grep, Glob, Bash(mvn -v)
---

你现在是本项目（Java 8 + Spring Boot 2.x）的首席架构师。你的任务是审查一段代码。

**审查目标：**
请仔细阅读并分析 `@$1` 中的所有 Java 代码。

**上下文准备：**
请首先读取项目根目录下的 `constitution.md`（工程宪法），确保你已完全理解所有条款。

**审查准则（必须严格遵守）：**
请根据 `constitution.md` 定义的开发宪法，对代码进行深入审查。你的审查报告必须围绕以下核心原则展开“合宪性”检查：

1.  **第一条：简单性与数据安全（Tech Stack & Safety）。**
    - **[关键]** 是否违规使用了 `double/float` 计算金额？（必须用 `BigDecimal`，条款 1.4）
    - **[关键]** DTO/VO 是否保证了不可变性？（严禁对 DTO 使用 `@Data`，应使用 `@Value` 或 `@Builder`，条款 1.3）
    - **[关键]** 是否引入了 `Fastjson` 或 `java.util.Date`？（必须用 Jackson 和 JSR-310，条款 1.2 & 3.3）

2.  **第二条：测试先行（Quality）。**
    - 如果审查的是业务代码，检查是否存在对应的单元测试？
    - 测试中是否包含大量断言堆砌？（条款 2.2）

3.  **第三条：防守型编程（Defensive Coding）。**
    - `Optional` 是否被错误地用作了参数？（条款 3.1）
    - Stream 操作是否过于复杂（超过3行）或包含副作用？（条款 3.2）

4.  **第四条：异常与日志（Error Handling）。**
    - 是否捕获了异常却不做处理（吞异常）？（条款 4.3）
    - 是否使用了 `System.out.println` 而非 `@Slf4j`？

**输出格式：**
请以 Markdown 格式，生成一份结构化的审查报告。报告应包含以下部分：

- **总体评价：** 一句话总结代码的整体质量（例如：“代码逻辑清晰，但存在严重的精度隐患”）。
- **优点（做得好的地方）：** 列出 1-2 个符合宪法精神的亮点。
- **违宪与待改进项（按优先级排序）：**
    - **🚨 [严重违宪 - High]:** 违反 `constitution.md` 中标注为“严禁”、“必须”的条款（如使用了 double 算钱、使用了 @Data）。**必须明确引用宪法条款编号。**
    - **⚠️ [建议优化 - Medium]:** 设计模式优化或代码可读性建议。
    - **📝 [风格微调 - Low]:** 命名规范或注释建议。

对于每一个待改进项，请明确指出 **文件名、行号、问题描述**，并给出具体的 **修改后的代码示例**。